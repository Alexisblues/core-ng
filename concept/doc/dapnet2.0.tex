\documentclass[a4paper]{article}

%% Language and font encodings
\usepackage[english]{babel}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}

%% Sets page size and margins
\usepackage[a4paper,top=3cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}

%% Useful packages
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[colorinlistoftodos]{todonotes}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}
\usepackage{listings,xcolor}

\title{DAPNET 2.0 Concept and Interface Definition}
\author{
Ralf Wilke, DH3WR\\
Thomas Gatzweiler, DL2IC\\
Phillip Thiel, DL6PT
}

\begin{document}
\maketitle
\lstset{
    string=[s]{"}{"},
    stringstyle=\color{blue},
    comment=[l]{:},
    commentstyle=\color{black},
}

\begin{abstract}
This is the concept and interface description of the version 2 of the DAPNET. It's purpose in comparison to the first version released is a more robust clustering and network interaction solution to cope with the special requirements of IP connections over HAMNET which means that all network connections have to be considered with a WAN character resulting in unreliable network connectivity. In terms of consistence of the database, "eventually consistence" is considered to be the most reachable. There are "always right" database nodes inside the so called HAMCLOUD. In case of database conflicts, the version inside the HAMCLOUD cluster is always to be considered right.
\end{abstract}

\section{Introduction}
\todo{write some history}
\section{Concept presentation}

\subsection{Core functionality}

\subsection{HAMCLOUD presentation}
The HAMCLOUD is a virtual server combination to server central services on the HAMNET and provide short hop connectivity to deployed service on HAMNET towards the Internet. There are three data centers at Essen, NÃ¼rnberg and Aachen, which have high bandwidth interlinks over the DFN. There are address spaces for uni- and anycast services. How this concept is deployed is still tbd.
\todo{Define if uni- or anycast entry points will exist}
More information is here \url{https://www.swiss-artg.ch/fileadmin/Dokumente/HAMNET/HamCloud_-_Angebotene_Dienste_in_der_HamCloud.pdf} and here \url{http://hamnetdb.net/?m=as&q=hamcloud}.

\section{Interface definition}

\subsection{Transmitter sign-in, configuration and keep-alive}
If a transmitter wants to connect to DAPNET, the first step is to sign-in and show it's presence via a REST interface. Tis interface is also used for transmitter configuration like enabled timeslots and keep-alive polling.

\textbf{Authentication of all HTTP-Requests in this context}
All HTTP-requests issued from a transmitter have to send a valid HTTP authentication, which is checked against the CouchDB. It consists of the transmitter name and its AuthKey.


\textbf{Initial contact}\\
\textit{URL: /newtransmitter}\\
\textit{PUT}\\

\begin{newtransmitter_put}
{
  "type": {
    "number": 600,
    "text":"Hello DAPNET, I want to join the network"
    },
  "transmitterInfo": {
    "callsign": "db0avr",
    <software version and type and number like on websocket definition> tbn.
  }
}
\end{newtransmitter_put}


Answers to welcome restcall 
{
"type": {
"number":200,
"text":"accessgrated",
"enabledtimeslots": [
true, false....[
}

Or

{
"type": {
"number"404,
"text":"transmitter temporary disabled by config",
}

{
"type": {
"number":405
"text":"transmitter software type not allowed due to serious bug",
}

'are you still there?' polling
to URL /transmitterkeepalive
Content of rest call

{
"type": {
"number":700,
"text":"I'm still there and running fine",
"callsign":"db0avr",
"ntpsyncok":true
}

Answer to this call


{
"type": {
"number":701,
"text":"Thanks for signal, kept as online, all ok on network side",
}

If network wants to assign new timeslots without disconnecting (for dynamic timeslots)

{
"type": {
"number": 703,
"text":"use mandatory new timeslots from timestamp on",
"newtimeslots":[
true,false...],
"validfrom":<timestamp>
}

If network wants to initiate handover to other node 
{
"type": {
"number":702,
"text":"Service temporary not available, switch over to other node.",
}
\end{lstlisting}



Comments can be added to your project by clicking on the comment icon in the toolbar above. % * <john.hammersley@gmail.com> 2014-09-03T09:54:16.211Z:
%
% Here's an example comment!
%
To reply to a comment, simply click the reply button in the lower right corner of the comment, and you can close them when you're done.

\subsection{How to include Figures}

First you have to upload the image file from your computer using the upload link in the project menu. Then use the includegraphics command to include it in your document. Use the figure environment and the caption command to add a number and a caption to your figure. See the code for Figure \ref{fig:frog} in this section for an example.

\begin{figure}
\centering
\includegraphics[width=0.3\textwidth]{frog.jpg}
\caption{\label{fig:frog}This frog was uploaded via the project menu.}
\end{figure}

\subsection{How to add Tables}

Use the table and tabular commands for basic tables --- see Table~\ref{tab:widgets}, for example. 

\begin{table}
\centering
\begin{tabular}{l|r}
Item & Quantity \\\hline
Widgets & 42 \\
Gadgets & 13
\end{tabular}
\caption{\label{tab:widgets}An example table.}
\end{table}

\subsection{How to write Mathematics}

\LaTeX{} is great at typesetting mathematics. Let $X_1, X_2, \ldots, X_n$ be a sequence of independent and identically distributed random variables with $\text{E}[X_i] = \mu$ and $\text{Var}[X_i] = \sigma^2 < \infty$, and let
\[S_n = \frac{X_1 + X_2 + \cdots + X_n}{n}
      = \frac{1}{n}\sum_{i}^{n} X_i\]
denote their mean. Then as $n$ approaches infinity, the random variables $\sqrt{n}(S_n - \mu)$ converge in distribution to a normal $\mathcal{N}(0, \sigma^2)$.


\subsection{How to create Sections and Subsections}

Use section and subsections to organize your document. Simply use the section and subsection buttons in the toolbar to create them, and we'll handle all the formatting and numbering automatically.

\subsection{How to add Lists}

You can make lists with automatic numbering \dots

\begin{enumerate}
\item Like this,
\item and like this.
\end{enumerate}
\dots or bullet points \dots
\begin{itemize}
\item Like this,
\item and like this.
\end{itemize}

\subsection{How to add Citations and a References List}

You can upload a \verb|.bib| file containing your BibTeX entries, created with JabRef; or import your \href{https://www.overleaf.com/blog/184}{Mendeley}, CiteULike or Zotero library as a \verb|.bib| file. You can then cite entries from it, like this: \cite{greenwade93}. Just remember to specify a bibliography style, as well as the filename of the \verb|.bib|.

You can find a \href{https://www.overleaf.com/help/97-how-to-include-a-bibliography-using-bibtex}{video tutorial here} to learn more about BibTeX.

We hope you find Overleaf useful, and please let us know if you have any feedback using the help menu above --- or use the contact form at \url{https://www.overleaf.com/contact}!

\bibliographystyle{alpha}
\bibliography{sample}

\end{document}
